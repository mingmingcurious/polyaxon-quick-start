version: 1.1
kind: operation
name: build
params:
  destination:
    #docker仓库连接，镜像构建完成后推送到这个仓库
    connection: registry-polyaxon
    value: polyaxon/polyaxon-quick-start:xw
runPatch:
  #指定域名解析
  environment:
    hostAliases:
    - ip: "172.16.1.33"
      hostnames:
      - "image.io"
  init:
  #构建镜像的配置
  - dockerfile:
      #基础镜像 FROM
      image: "tensorflow/tensorflow:2.4.2"
      #RUN命令
      run:
      - 'pip3 install --no-cache-dir -U polyaxon'
      #ENV命令
      langEnv: 'en_US.UTF-8'
hubRef: my-kaniko
